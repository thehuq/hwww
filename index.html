<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý Danh Mục</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h2>Quản lý Danh Mục</h2>
    
    <form id="categoryForm">
        <input type="text" id="categoryId" placeholder="ID Danh Mục" required>
        <input type="text" id="categoryName" placeholder="Tên Danh Mục" required>
        <input type="text" id="categoryDesc" placeholder="Mô Tả" required>
        <button type="submit">Thêm Danh Mục</button>
    </form>
    
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Tên</th>
                <th>Mô Tả</th>
                <th>Hành động</th>
            </tr>
        </thead>
        <tbody id="categoryList"></tbody>
    </table>
    
    <script>
        $(document).ready(function () {
            function loadCategories() {
                let categories = JSON.parse(localStorage.getItem("categories")) || [];
                $("#categoryList").html("");
                categories.forEach((cat, index) => {
                    $("#categoryList").append(`
                        <tr>
                            <td>${cat.id}</td>
                            <td>${cat.name}</td>
                            <td>${cat.description}</td>
                            <td><span class='delete-btn' data-index='${index}'>Xóa</span></td>
                        </tr>
                    `);
                });
            }
            
            $("#categoryForm").submit(function (e) {
                e.preventDefault();
                let id = $("#categoryId").val().trim();
                let name = $("#categoryName").val().trim();
                let description = $("#categoryDesc").val().trim();
                
                if (!id || !name || !description) {
                    alert("Vui lòng nhập đầy đủ thông tin!");
                    return;
                }
                
                let categories = JSON.parse(localStorage.getItem("categories")) || [];
                categories.push({ id, name, description });
                localStorage.setItem("categories", JSON.stringify(categories));
                
                $("#categoryForm")[0].reset();
                loadCategories();
            });
            
            $(document).on("click", ".delete-btn", function () {
                let index = $(this).data("index");
                let categories = JSON.parse(localStorage.getItem("categories")) || [];
                categories.splice(index, 1);
                localStorage.setItem("categories", JSON.stringify(categories));
                loadCategories();
            });
            
            loadCategories();
        });
    </script>
</body>
</html>
